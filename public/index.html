<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SmartEmail | AI-Powered Email Responder</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>SmartEmail</h1>
    <input type="email" id="userEmail" placeholder="Enter your email" />
    <textarea id="emailContent" placeholder="Paste email content here..."></textarea>
    <button id="generateBtn">Generate Reply</button>
    <div id="replyContainer" class="hidden">
      <h2>AI-Generated Reply</h2>
      <pre id="replyOutput"></pre>
    </div>
    <div id="errorMessage"></div>
  </div>
  <script>
    document.getElementById("generateBtn").addEventListener("click", async () => {
      const email = document.getElementById("userEmail").value.trim();
      const content = document.getElementById("emailContent").value.trim();
      const output = document.getElementById("replyOutput");
      const error = document.getElementById("errorMessage");

      output.textContent = '';
      error.textContent = '';

      const res = await fetch("/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, content }),
      });

      const data = await res.json();

      if (res.ok) {
        document.getElementById("replyContainer").classList.remove("hidden");
        output.textContent = data.reply;
      } else {
        error.textContent = data.error || "Something went wrong.";
      }
    });
  </script>
</body>
</html>
